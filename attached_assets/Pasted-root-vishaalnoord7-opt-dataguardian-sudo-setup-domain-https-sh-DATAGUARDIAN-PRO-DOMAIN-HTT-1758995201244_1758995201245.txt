root@vishaalnoord7:/opt/dataguardian# sudo ./setup_domain_https.sh
ğŸŒ DATAGUARDIAN PRO DOMAIN & HTTPS SETUP
========================================
Configuring dataguardianpro.nl with SSL certificates

ğŸ”§ PART 1: System preparation
============================
âœ… Running as root
ğŸ“¦ Updating system packages...
ğŸ“¦ Installing required packages...
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
certbot is already the newest version (1.21.0-1build1).
python3-certbot-nginx is already the newest version (1.21.0-1).
curl is already the newest version (7.81.0-1ubuntu1.20).
nginx is already the newest version (1.18.0-6ubuntu14.7).
ufw is already the newest version (0.36.1-4ubuntu0.1).
wget is already the newest version (1.21.2-2ubuntu1.1).
The following packages were automatically installed and are no longer required:
  libio-pty-perl libipc-run-perl linux-headers-5.15.0-153 linux-headers-5.15.0-153-generic
  linux-image-5.15.0-153-generic linux-modules-5.15.0-153-generic linux-modules-extra-5.15.0-153-generic postgresql-17
  postgresql-client-17 postgresql-common-dev
Use 'sudo apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
âœ… System packages installed

ğŸ”¥ PART 2: Firewall configuration
==============================
ğŸ”§ Configuring UFW firewall...
Firewall is active and enabled on system startup
Skipping adding existing rule
Skipping adding existing rule (v6)
Skipping adding existing rule
Skipping adding existing rule (v6)
Skipping adding existing rule
Skipping adding existing rule (v6)
Skipping adding existing rule
Skipping adding existing rule (v6)
Skipping adding existing rule
Skipping adding existing rule (v6)
Firewall reloaded
âœ… Firewall configured
ğŸ“Š Firewall status:
Status: active

To                         Action      From
--                         ------      ----
22/tcp                     ALLOW       Anywhere
80/tcp                     ALLOW       Anywhere
443/tcp                    ALLOW       Anywhere
5000                       ALLOW       Anywhere
22                         ALLOW       Anywhere
5000/tcp                   ALLOW       Anywhere
22/tcp (v6)                ALLOW       Anywhere (v6)
80/tcp (v6)                ALLOW       Anywhere (v6)
443/tcp (v6)               ALLOW       Anywhere (v6)
5000 (v6)                  ALLOW       Anywhere (v6)
22 (v6)                    ALLOW       Anywhere (v6)
5000/tcp (v6)              ALLOW       Anywhere (v6)


ğŸŒ PART 3: Nginx configuration
===========================
ğŸ“ Creating nginx configuration for dataguardianpro.nl...
ğŸ§ª Testing nginx configuration...
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
âœ… Nginx configuration is valid
Synchronizing state of nginx.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install enable nginx
âœ… Nginx configured and started

ğŸ” PART 4: DNS verification
========================
ğŸ” Checking DNS resolution for dataguardianpro.nl...
âš ï¸  DNS resolution: dataguardianpro.nl â†’ FAIL
ğŸ’¡ Expected: 45.81.35.202
ğŸ’¡ DNS propagation may take up to 24-48 hours
ğŸŒ Testing HTTP access...
âœ… HTTP access working: http://dataguardianpro.nl

ğŸ” PART 5: SSL certificate setup
==============================
ğŸ”§ Setting up Let's Encrypt SSL certificate...
âš ï¸  Skipping SSL setup - domain not yet accessible
ğŸ’¡ Run this script again after DNS propagation completes

âš™ï¸  PART 6: Streamlit configuration update
=======================================
ğŸ“ Updating Streamlit configuration for domain usage...
ğŸ”„ Restarting Streamlit with domain configuration...
âœ… Streamlit restarted for domain usage (PID: 2154771)

ğŸ”„ PART 7: Automatic SSL renewal setup
====================================
âš™ï¸  Setting up automatic SSL certificate renewal...
âœ… Automatic SSL renewal configured

ğŸ PART 8: Final verification & status
====================================
ğŸ§ª Running final verification tests...
ğŸ“ DNS: dataguardianpro.nl â†’ FAIL
ğŸŒ HTTP: 502
ğŸ” HTTPS: 000000
ğŸ–¥ï¸  Streamlit: 0 process(es) running

ğŸ“Š DOMAIN & HTTPS SETUP STATUS
==============================

â³ DNS PROPAGATION IN PROGRESS
=============================

âœ… Server: Configured and ready
âœ… SSL Setup: Prepared
â³ DNS: Propagating (24-48 hours)

ğŸ’¡ NEXT STEPS:
   1. Wait for DNS propagation
   2. Re-run: sudo ./setup_domain_https.sh
   3. Domain will be live with HTTPS

ğŸ“‹ CONFIGURATION SUMMARY:
========================
   ğŸŒ Domain: dataguardianpro.nl
   ğŸ“ Server IP: 45.81.35.202
   ğŸ” SSL: Let's Encrypt
   ğŸŒ Web Server: Nginx
   ğŸ–¥ï¸  Backend: Streamlit on port 5000
   ğŸ”„ Auto-renewal: Configured

âœ… DOMAIN & HTTPS SETUP COMPLETE!
DataGuardian Pro is configured for production with professional domain
root@vishaalnoord7:/opt/dataguardian# sudo ./setup_domain_https.sh
ğŸŒ DATAGUARDIAN PRO DOMAIN & HTTPS SETUP
========================================
Configuring dataguardianpro.nl with SSL certificates

ğŸ”§ PART 1: System preparation
============================
âœ… Running as root
ğŸ“¦ Updating system packages...
ğŸ“¦ Installing required packages...
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
certbot is already the newest version (1.21.0-1build1).
python3-certbot-nginx is already the newest version (1.21.0-1).
curl is already the newest version (7.81.0-1ubuntu1.20).
nginx is already the newest version (1.18.0-6ubuntu14.7).
ufw is already the newest version (0.36.1-4ubuntu0.1).
wget is already the newest version (1.21.2-2ubuntu1.1).
The following packages were automatically installed and are no longer required:
  libio-pty-perl libipc-run-perl linux-headers-5.15.0-153 linux-headers-5.15.0-153-generic
  linux-image-5.15.0-153-generic linux-modules-5.15.0-153-generic linux-modules-extra-5.15.0-153-generic postgresql-17
  postgresql-client-17 postgresql-common-dev
Use 'sudo apt autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
âœ… System packages installed

ğŸ”¥ PART 2: Firewall configuration
==============================
ğŸ”§ Configuring UFW firewall...
Firewall is active and enabled on system startup
Skipping adding existing rule
Skipping adding existing rule (v6)
Skipping adding existing rule
Skipping adding existing rule (v6)
Skipping adding existing rule
Skipping adding existing rule (v6)
Skipping adding existing rule
Skipping adding existing rule (v6)
Skipping adding existing rule
Skipping adding existing rule (v6)
Firewall reloaded
âœ… Firewall configured
ğŸ“Š Firewall status:
Status: active

To                         Action      From
--                         ------      ----
22/tcp                     ALLOW       Anywhere
80/tcp                     ALLOW       Anywhere
443/tcp                    ALLOW       Anywhere
5000                       ALLOW       Anywhere
22                         ALLOW       Anywhere
5000/tcp                   ALLOW       Anywhere
22/tcp (v6)                ALLOW       Anywhere (v6)
80/tcp (v6)                ALLOW       Anywhere (v6)
443/tcp (v6)               ALLOW       Anywhere (v6)
5000 (v6)                  ALLOW       Anywhere (v6)
22 (v6)                    ALLOW       Anywhere (v6)
5000/tcp (v6)              ALLOW       Anywhere (v6)


ğŸŒ PART 3: Nginx configuration
===========================
ğŸ“ Creating nginx configuration for dataguardianpro.nl...
ğŸ§ª Testing nginx configuration...
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
âœ… Nginx configuration is valid
Synchronizing state of nginx.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install enable nginx
âœ… Nginx configured and started

ğŸ” PART 4: DNS verification
========================
ğŸ” Checking DNS resolution for dataguardianpro.nl...
âš ï¸  DNS resolution: dataguardianpro.nl â†’ FAIL
ğŸ’¡ Expected: 45.81.35.202
ğŸ’¡ DNS propagation may take up to 24-48 hours
ğŸŒ Testing HTTP access...
âš ï¸  HTTP access status: 502
ğŸ’¡ This is normal if DNS hasn't propagated yet

ğŸ” PART 5: SSL certificate setup
==============================
ğŸ”§ Setting up Let's Encrypt SSL certificate...
âš ï¸  Skipping SSL setup - domain not yet accessible
ğŸ’¡ Run this script again after DNS propagation completes

âš™ï¸  PART 6: Streamlit configuration update
=======================================
ğŸ“ Updating Streamlit configuration for domain usage...
ğŸ”„ Restarting Streamlit with domain configuration...
âœ… Streamlit restarted for domain usage (PID: 2159198)

ğŸ”„ PART 7: Automatic SSL renewal setup
====================================
âš™ï¸  Setting up automatic SSL certificate renewal...
âœ… Automatic SSL renewal configured

ğŸ PART 8: Final verification & status
====================================



























