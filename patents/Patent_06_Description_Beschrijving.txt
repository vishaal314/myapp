     BESCHRIJVING (DESCRIPTION)
     Cloud Sustainability & Carbon Footprint Scanner - Zombie Resource Detection

      PAGINA 1 van 8
  5
      TITEL VAN DE UITVINDING

     Cloud Sustainability & Carbon Footprint Scanner with Zombie Resource Detection,
Regional CO₂ Emission Calculation, Code Bloat Analysis, and Netherlands Carbon Tax
Compliance

 10   TECHNISCH GEBIED

     Deze uitvinding betreft een geautomatiseerd cloud sustainability scanning systeem
dat zombie resources detecteert (idle VMs met <10% CPU utilization, unused storage 
accounts, orphaned IP addresses, unattached disks), regionale CO₂ emissies berekent 
(EU average 0.295 kg CO₂/kWh, Netherlands 0.412 kg CO₂/kWh, Norway 0.008 kg CO₂/kWh),
code bloat analyseert (dead functions, duplicate code, unused imports, large binary 
files), en Netherlands carbon tax compliance implementeert (€30-80/tonne CO₂, CO₂-
heffing industrie). Het systeem ondersteunt multi-cloud environments (Azure, AWS, GCP),
berekent carbon costs (€60-80/tonne × total emissions), en genereert professionele
sustainability rapporten met optimization recommendations.

      ACHTERGROND VAN DE UITVINDING
 15
      Stand van de Techniek

     Cloud computing groeit exponentieel (34% CAGR 2024-2030), maar sustainability wordt
vaak vergeten. Organisaties betalen voor resources die ze niet gebruiken, verspillen 
energie, en verhogen hun carbon footprint zonder dat ze het beseffen.

 20 Current Cloud Waste Statistics:
     1. 35% cloud resources zijn idle of underutilized (Flexera State of Cloud 2024)
     2. $17.6 billion jaarlijks verspild aan unused cloud resources (HashiCorp)
     3. Average VM utilization slechts 12-18% (VMware)
     4. 30% storage accounts ongebruikt na 6 maanden
     5. 45% orphaned resources (IP addresses, disks) na project afloop
 25

PAGINA 2 van 8

     GDPR vereist data minimization (Artikel 5.1.c), maar dit wordt zelden toegepast op
cloud resources. Sustainability rapportage (CSRD - Corporate Sustainability Reporting 
Directive) wordt verplicht voor grote EU bedrijven vanaf 2024.

 30   Probleem met Bestaande Oplossingen

      Huidige cloud monitoring tools hebben significante beperkingen:

     a) Geen Sustainability Focus: Leading cloud providers (Azure Monitor, AWS CloudWatch,
GCP Operations) monitoren alleen performance/cost, geen carbon footprint;
 35
     b) Geen Zombie Detection: Kunnen niet automatisch idle resources identificeren met
actionable recommendations;

     c) Geen Regional CO₂ Calculation: Missen regionale emission factors voor accurate
carbon footprint;

 40 d) Geen Code Bloat Analysis: Cloud scanners kijken niet naar application code bloat
(dead functions, duplicates);
     e) Geen Netherlands Specialization: Missen Nederlandse carbon tax rates (€30-80/tonne)
en CO₂-heffing compliance;

     f) Geen Multi-Cloud: Elke provider heeft eigen tools, geen unified sustainability view
across Azure/AWS/GCP.
 45
     Voor Nederlandse organisaties die CSRD compliance moeten behalen (10,000+ bedrijven),
bestaat er geen geïntegreerde oplossing die sustainability metrics combineert met privacy
compliance.

      SAMENVATTING VAN DE UITVINDING

 50   Doel van de Uitvinding

     Deze uitvinding lost bovenstaande problemen op door het eerste geïntegreerde 
sustainability scanning systeem te verstrekken dat:


PAGINA 3 van 8
 55
     1. Zombie Resource Detection: Identificeert idle VMs (<10% avg CPU 30 days), unused
storage (0 transactions 90 days), orphaned IPs (not attached), unattached disks (>30 days),
oversized databases (>2× actual usage);

     2. Regional CO₂ Calculation: Precies emission factors per regio:
        - EU average: 0.295 kg CO₂/kWh
 60     - Netherlands: 0.412 kg CO₂/kWh (coal-heavy grid)
        - Norway: 0.008 kg CO₂/kWh (hydropower)
        - Germany: 0.338 kg CO₂/kWh
        - France: 0.056 kg CO₂/kWh (nuclear-heavy)
        - Poland: 0.766 kg CO₂/kWh (coal-dominant);

 65 3. Code Bloat Analysis: Scans application code voor:
       - Dead functions (defined maar never called)
       - Duplicate code blocks (>10 line similarity)
       - Unused imports (imported maar never used)
       - Large binary files in repo (>10 MB)
       - Commented-out code (>50 lines consecutive);

     4. Multi-Cloud Support: Unified scanning across Azure (ARM API), AWS (CloudWatch API),
GCP (Cloud Monitoring API);

 70 5. Carbon Cost Calculation: Netherlands carbon tax (€30-80/tonne CO₂) × total emissions
= financial impact;

     6. CSRD Compliance: Corporate Sustainability Reporting Directive alignment met Scope 3
emissions (cloud usage).

     Hoofdkenmerken van de Uitvinding
 75

     A. ZOMBIE RESOURCE DETECTION ENGINE


PAGINA 4 van 8
 80
     1. Idle Virtual Machine Detection

      Criteria:
      - Average CPU utilization <10% over past 30 days
 85   - Network throughput <1 MB/hour average
      - Disk I/O operations <100/hour average
      - No active SSH/RDP connections in 14+ days

      Azure Implementation:
      GET https://management.azure.com/subscriptions/{subscriptionId}/providers/
 90       Microsoft.Compute/virtualMachines?api-version=2023-03-01

      Metrics Analysis:
      GET https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/
          {resourceGroup}/providers/Microsoft.Compute/virtualMachines/{vmName}/
 95       providers/Microsoft.Insights/metrics?
          api-version=2018-01-01&
          metricnames=Percentage CPU,Network In,Network Out&
          timespan=P30D&
          interval=PT1H
100
      Zombie Detection Logic:
      if avg_cpu < 10 and avg_network < 1000000 and avg_disk_ops < 100:
          recommendation = "Shutdown or resize VM"
          potential_savings = vm_monthly_cost * 0.95  # 95% savings
105

      2. Unused Storage Account Detection

      Criteria:
110   - Zero transactions in past 90 days
      - No blob access logs
      - No file share activity
      - Total storage <1 GB (minimal usage)

115   Azure Blob Storage Analysis:
      GET https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/
          {resourceGroup}/providers/Microsoft.Storage/storageAccounts/{accountName}/
          blobServices/default/providers/Microsoft.Insights/metrics?
          metricnames=Transactions,UsedCapacity
120

PAGINA 5 van 8

      3. Orphaned IP Address Detection

125   Criteria:
      - Public IP allocated but not attached to VM/Load Balancer
      - No traffic in past 30 days
      - Allocation age >30 days

      Azure Public IP Analysis:
130   GET https://management.azure.com/subscriptions/{subscriptionId}/providers/
          Microsoft.Network/publicIPAddresses?api-version=2023-02-01

      for ip in public_ips:
          if ip['properties']['ipConfiguration'] is None:
135           orphaned_ips.append({
                  'name': ip['name'],
                  'age_days': (datetime.now() - ip['properties']['createdDate']).days,
                  'monthly_cost': 3.65,  # €3.65/month for unused IP
                  'recommendation': 'Release IP address'
140           })

      4. Unattached Disk Detection

      Criteria:
145   - Managed disk not attached to any VM
      - Disk age >30 days
      - Not a recent snapshot/backup

      Azure Managed Disks:
150   GET https://management.azure.com/subscriptions/{subscriptionId}/providers/
          Microsoft.Compute/disks?api-version=2023-01-02

      for disk in managed_disks:
          if disk['properties']['diskState'] == 'Unattached':
155           unattached_disks.append({
                  'name': disk['name'],
                  'size_gb': disk['properties']['diskSizeGB'],
                  'monthly_cost': disk['properties']['diskSizeGB'] * 0.05,  # ~€0.05/GB/month
                  'recommendation': 'Delete if not needed for backup'
160           })

      B. REGIONAL CO₂ EMISSION CALCULATION ENGINE


PAGINA 6 van 8
165
     1. Emission Factors by Region (kg CO₂ per kWh)

      EMISSION_FACTORS = {
          # Western Europe
170       'westeurope': 0.295,      # Netherlands/Belgium
          'northeurope': 0.008,     # Ireland (renewable-heavy)
          'francecentral': 0.056,   # France (nuclear)
          'germanywestcentral': 0.338,  # Germany
          'norwayeast': 0.008,      # Norway (hydropower)
175       'swedencentral': 0.013,   # Sweden (renewable)
          'switzerlandnorth': 0.029,  # Switzerland (hydropower/nuclear)
          
          # Eastern Europe
          'polandcentral': 0.766,   # Poland (coal-dominant)
180       
          # North America  
          'eastus': 0.385,          # US East Coast
          'westus': 0.296,          # US West Coast (renewable)
          'canadacentral': 0.130,   # Canada (hydropower)
185       
          # Asia Pacific
          'southeastasia': 0.493,   # Singapore
          'japaneast': 0.463,       # Japan
          'australiaeast': 0.810,   # Australia (coal)
190   }

      Netherlands Carbon Intensity:
      NL_CARBON_INTENSITY = 0.412  # kg CO₂/kWh
      # Source: CBS (Centraal Bureau voor de Statistiek) 2024
195   # Netherlands electricity grid: 60% natural gas, 20% coal, 15% renewable, 5% nuclear

      2. VM Power Consumption Calculation

      def calculate_vm_power_consumption(vm_size: str, cpu_utilization: float) -> float:
200       """
          Calculate estimated kWh usage for VM based on size and utilization.
          
          Azure VM sizes power consumption (watts at 100% CPU):
          - Standard_B1s: 25W
205       - Standard_B2s: 50W
          - Standard_D2s_v3: 80W
          - Standard_D4s_v3: 160W
          - Standard_D8s_v3: 320W
          """
210       
          VM_POWER_WATTS = {
              'Standard_B1s': 25,
              'Standard_B2s': 50,
              'Standard_D2s_v3': 80,
215           'Standard_D4s_v3': 160,
              'Standard_D8s_v3': 320,
              'Standard_E16s_v3': 640
          }
          

PAGINA 7 van 8
220       base_watts = VM_POWER_WATTS.get(vm_size, 100)  # Default 100W
          actual_watts = base_watts * (cpu_utilization / 100.0)
          
          # Calculate monthly kWh (24 hours × 30 days)
225       monthly_kwh = (actual_watts / 1000) * 24 * 30
          
          return monthly_kwh

      3. Carbon Footprint Calculation
230
      def calculate_carbon_footprint(resource_kwh: float, region: str) -> Dict:
          """
          Calculate CO₂ emissions and carbon cost.
          """
235       emission_factor = EMISSION_FACTORS.get(region, 0.295)  # Default EU average
          
          # Total CO₂ emissions (kg)
          total_co2_kg = resource_kwh * emission_factor
          
240       # Netherlands carbon tax (€30-80/tonne, use €60 average)
          CARBON_TAX_EUR_PER_TONNE = 60
          carbon_cost_eur = (total_co2_kg / 1000) * CARBON_TAX_EUR_PER_TONNE
          
          return {
245           'kwh_consumed': resource_kwh,
              'co2_kg': total_co2_kg,
              'co2_tonnes': total_co2_kg / 1000,
              'emission_factor': emission_factor,
              'region': region,
250           'carbon_tax_eur': carbon_cost_eur,
              'equivalent_trees': total_co2_kg / 21.77  # kg CO₂ absorbed per tree/year
          }

      C. CODE BLOAT ANALYSIS ENGINE
255
     1. Dead Function Detection

      import ast
      
260   def detect_dead_functions(code_content: str) -> List[Dict]:
          """
          Analyze Python code for functions that are defined but never called.
          """
          tree = ast.parse(code_content)
265       
          # Extract all function definitions
          defined_functions = set()
          for node in ast.walk(tree):
              if isinstance(node, ast.FunctionDef):
270               defined_functions.add(node.name)
          
          # Extract all function calls
          called_functions = set()
          for node in ast.walk(tree):
275           if isinstance(node, ast.Call):
                  if isinstance(node.func, ast.Name):
                      called_functions.add(node.func.id)
          

PAGINA 8 van 8
280       # Dead functions = defined but never called
          dead_functions = defined_functions - called_functions
          
          return [{
              'function_name': func,
285           'recommendation': f'Remove unused function: {func}',
              'bloat_score': 10  # Each dead function = 10 points
          } for func in dead_functions]

      2. Duplicate Code Detection
290
      def detect_duplicate_code(files: List[str], min_lines: int = 10) -> List[Dict]:
          """
          Find duplicate code blocks across files (>10 line similarity).
          """
295       duplicates = []
          
          for i, file1 in enumerate(files):
              for file2 in files[i+1:]:
                  # Compare line-by-line with sliding window
300               similarity = calculate_similarity(file1, file2, min_lines)
                  if similarity > 0.8:  # 80% similarity threshold
                      duplicates.append({
                          'file1': file1,
                          'file2': file2,
305                   'similarity_pct': similarity * 100,
                          'recommendation': 'Extract common code to shared module'
                      })
          
          return duplicates
310
      3. Unused Imports Detection

      def detect_unused_imports(code_content: str) -> List[str]:
          """
315       Find imports that are never used in code.
          """
          tree = ast.parse(code_content)
          
          # Extract imports
320       imported_names = set()
          for node in ast.walk(tree):
              if isinstance(node, ast.Import):
                  for alias in node.names:
                      imported_names.add(alias.name)
325           elif isinstance(node, ast.ImportFrom):
                  for alias in node.names:
                      imported_names.add(alias.name)
          
          # Extract name usage
330       used_names = set()
          for node in ast.walk(tree):
              if isinstance(node, ast.Name):
                  used_names.add(node.id)
          
335       unused_imports = imported_names - used_names
          return list(unused_imports)

      D. NETHERLANDS CARBON TAX COMPLIANCE

340 1. CO₂-heffing voor de Industrie

      Netherlands Carbon Tax Rates (2024):
      - €0-30/tonne: Free allowance
      - €30/tonne: Base rate (2024)
345   - €50/tonne: Projected rate (2026)
      - €80/tonne: Target rate (2030)

      Compliance Calculation:
      if total_co2_tonnes > FREE_ALLOWANCE_TONNES:
350       taxable_tonnes = total_co2_tonnes - FREE_ALLOWANCE_TONNES
          carbon_tax_owed = taxable_tonnes * CARBON_TAX_RATE
      else:
          carbon_tax_owed = 0

355   2. CSRD Reporting Integration

      Corporate Sustainability Reporting Directive requires:
      - Scope 1: Direct emissions (owned/controlled sources)
      - Scope 2: Indirect emissions (purchased electricity)
360   - Scope 3: Value chain emissions (cloud providers)

      Cloud emissions = Scope 3 Category 1 (Purchased goods/services)

      def generate_csrd_report(cloud_emissions: Dict) -> Dict:
365       return {
              'scope_3_category_1': {
                  'cloud_services_co2_tonnes': cloud_emissions['co2_tonnes'],
                  'emission_factor_used': cloud_emissions['emission_factor'],
                  'calculation_methodology': 'Regional emission factors per kWh',
370           'data_quality': 'High (actual resource metrics)'
              }
          }

      EINDE BESCHRIJVING
