root@vishaalnoord7:/opt/dataguardian# ./FIX_TENANT_SCHEMA_COMPLETE.sh

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                                                      ‚ïë
‚ïë    DataGuardian Pro - Complete Tenant Schema Fix                    ‚ïë
‚ïë                                                                      ‚ïë
‚ïë    Fixes schema mismatch between code and database                  ‚ïë
‚ïë                                                                      ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù


üîç Issue Analysis:
   The code expects columns that don't exist in the database
   This causes the application to fail during startup

üìä Applying Complete Fix...

"Step 1: Adding ALL missing columns to tenants table..."
NOTICE:  column "organization_id" of relation "tenants" already exists, skipping
ALTER TABLE
NOTICE:  column "organization_name" of relation "tenants" already exists, skipping
ALTER TABLE
NOTICE:  column "tier" of relation "tenants" already exists, skipping
ALTER TABLE
NOTICE:  column "max_users" of relation "tenants" already exists, skipping
ALTER TABLE
NOTICE:  column "max_scans_per_month" of relation "tenants" already exists, skipping
ALTER TABLE
NOTICE:  column "max_storage_gb" of relation "tenants" already exists, skipping
ALTER TABLE
NOTICE:  column "features" of relation "tenants" already exists, skipping
ALTER TABLE
NOTICE:  column "compliance_regions" of relation "tenants" already exists, skipping
ALTER TABLE
ALTER TABLE
NOTICE:  column "created_at" of relation "tenants" already exists, skipping
ALTER TABLE
NOTICE:  column "updated_at" of relation "tenants" already exists, skipping
ALTER TABLE
ALTER TABLE
NOTICE:  column "status" of relation "tenants" already exists, skipping
ALTER TABLE
NOTICE:  column "subscription_status" of relation "tenants" already exists, skipping
ALTER TABLE
NOTICE:  column "data_retention_days" of relation "tenants" already exists, skipping
ALTER TABLE
NOTICE:  column "encryption_enabled" of relation "tenants" already exists, skipping
ALTER TABLE
"‚úÖ All tenant columns ensured"
""
"Step 2: Recreating default_org tenant with complete configuration..."
DELETE 1
INSERT 0 1
"‚úÖ default_org tenant created with all fields"
""
"Step 3: Verifying tenant configuration..."
 organization_id |  organization_name   |    tier    | max_scans_per_month | max_storage_gb | status | subscription_status
-----------------+----------------------+------------+---------------------+----------------+--------+---------------------
 default_org     | Default Organization | enterprise |              999999 |           1000 | active | active
(1 row)

""
"‚úÖ Tenant configuration verified"
""
"Step 4: Checking table schema..."
      column_name      |          data_type
-----------------------+-----------------------------
 id                    | integer
 organization_id       | character varying
 organization_name     | character varying
 status                | character varying
 tier                  | character varying
 max_users             | integer
 max_scans_per_month   | integer
 features              | jsonb
 subscription_status   | character varying
 subscription_end_date | timestamp without time zone
 created_at            | timestamp without time zone
 updated_at            | timestamp without time zone
 max_storage_gb        | integer
 compliance_regions    | jsonb
 data_retention_days   | integer
 encryption_enabled    | boolean
 data_residency        | character varying
 metadata              | jsonb
(18 rows)

""
"‚úÖ Schema verification complete"

‚úÖ Database schema fixed successfully

üîÑ Restarting application to apply changes...
dataguardian-container
‚è≥ Waiting for application to start (30 seconds)...

‚úÖ Final Verification:

‚ùå Still has column errors
‚ùå Still has tenant access errors
‚ùå Still has tenant creation errors
‚úÖ Application started successfully

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚ö†Ô∏è  ISSUES STILL PRESENT

Check detailed logs with:
   docker logs dataguardian-container | tail -200

Check database schema with:
   docker exec dataguardian-container psql -U dataguardian -d dataguardian -c '\d tenants'
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

root@vishaalnoord7:/opt/dataguardian# docker logs dataguardian-container | tail -200
2025-10-06 22:21:29,751 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:21:34,816 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:21:35,375 - utils.secure_auth_enhanced - INFO - User vishaal314 authenticated successfully
2025-10-06 22:21:35,494 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:21:35,511 - utils.session_optimizer - INFO - Created session 61ae5d6a-016d-4781-8ec2-b4c9d45557f5 for user vishaal314
2025-10-06 22:21:35,523 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:21:35,540 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-06 22:21:37,880 - services.encryption_service - INFO - Local KMS provider initialized
2025-10-06 22:21:37,881 - services.encryption_service - WARNING - boto3 not available for AWS KMS integration
2025-10-06 22:21:37,881 - services.encryption_service - INFO - Key management initialized
2025-10-06 22:21:37,963 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-06 22:21:37,995 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-06 22:21:37,999 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-06 22:21:38,026 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "max_storage_gb" does not exist
LINE 3:                    max_storage_gb, features, compliance_regi...
                           ^

2025-10-06 22:21:38,048 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "max_storage_gb" of relation "tenants" does not exist
LINE 4:              max_storage_gb, features, compliance_regions, d...
                     ^

2025-10-06 22:21:38,048 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "max_storage_gb" of relation "tenants" does not exist
LINE 4:              max_storage_gb, features, compliance_regions, d...
                     ^

2025-10-06 22:21:38,054 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-06 22:21:38,055 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-06 22:21:38,124 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-06 22:21:38,125 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-06 22:21:38,125 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-06 22:21:38,129 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-06 22:21:38,130 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-06 22:21:38,130 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-06 22:21:38,131 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-06 22:21:38,132 - __main__ - INFO - Dashboard: Retrieved 0 total scans for user vishaal314
2025-10-06 22:21:38,133 - __main__ - INFO - Dashboard: No scans found for user vishaal314, getting all recent scans
2025-10-06 22:21:38,133 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-06 22:21:38,133 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-06 22:21:38,134 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-06 22:21:38,135 - __main__ - INFO - Dashboard: Raw aggregator returned 0 scans for user vishaal314
2025-10-06 22:21:38,136 - __main__ - INFO - Dashboard: Processing 0 completed scans from aggregator
2025-10-06 22:21:38,192 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-06 22:21:38,219 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-06 22:21:38,229 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-06 22:21:38,276 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "max_storage_gb" does not exist
LINE 3:                    max_storage_gb, features, compliance_regi...
                           ^

2025-10-06 22:21:38,323 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "max_storage_gb" of relation "tenants" does not exist
LINE 4:              max_storage_gb, features, compliance_regions, d...
                     ^

2025-10-06 22:21:38,324 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "max_storage_gb" of relation "tenants" does not exist
LINE 4:              max_storage_gb, features, compliance_regions, d...
                     ^

2025-10-06 22:21:38,324 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-06 22:21:38,325 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-06 22:21:38,363 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-06 22:21:38,364 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-06 22:21:38,365 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-06 22:21:38,365 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-06 22:21:38,366 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-06 22:21:38,366 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-06 22:21:38,367 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-06 22:21:38,369 - __main__ - INFO - Dashboard: Direct database query found 0 total scans for user vishaal314
2025-10-06 22:21:38,369 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-06 22:21:38,370 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-06 22:21:38,370 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-06 22:21:38,372 - __main__ - INFO - Dashboard: No user-specific scans, using 0 total scans from database
2025-10-06 22:21:38,373 - __main__ - INFO - Dashboard: Manual date filtering found 0 scans within 30 days
2025-10-06 22:21:38,373 - __main__ - INFO - Dashboard: Activity tracker found 0 total activities, 0 completed scans
2025-10-06 22:21:38,374 - __main__ - INFO - Dashboard: Found 0 total activities, 0 today in activity tracker
2025-10-06 22:21:38,374 - __main__ - INFO - Dashboard: Combining 0 aggregator scans + 0 today's activities
2025-10-06 22:21:38,374 - __main__ - INFO - Dashboard DISPLAY: Showing metrics - Scans: 0, PII: 0, Compliance: 94.5%, Issues: 0
2025-10-06 22:21:38,418 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-06 22:21:38,436 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-06 22:21:38,438 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-06 22:21:38,478 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "max_storage_gb" does not exist
LINE 3:                    max_storage_gb, features, compliance_regi...
                           ^

2025-10-06 22:21:38,527 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "max_storage_gb" of relation "tenants" does not exist
LINE 4:              max_storage_gb, features, compliance_regions, d...
                     ^

2025-10-06 22:21:38,528 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "max_storage_gb" of relation "tenants" does not exist
LINE 4:              max_storage_gb, features, compliance_regions, d...
                     ^

2025-10-06 22:21:38,534 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-06 22:21:38,535 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-06 22:21:38,576 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-06 22:21:38,577 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-06 22:21:38,578 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-06 22:21:38,578 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-06 22:21:38,579 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-06 22:21:38,579 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-06 22:21:38,580 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-06 22:21:38,582 - __main__ - INFO - Dashboard: Fresh aggregator returned 0 scans for recent activity display
2025-10-06 22:21:38,583 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-06 22:21:38,583 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-06 22:21:38,584 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-06 22:21:38,586 - __main__ - INFO - Dashboard: No user-specific scans, using 0 total recent scans from all users2025-10-06 22:21:38,586 - __main__ - INFO - Dashboard: Ensuring all scanner types update dashboard data properly
2025-10-06 22:21:42,258 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:21:42,312 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:21:42,330 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-06 22:21:42,354 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:21:45,733 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:21:45,767 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:21:45,777 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-06 22:21:45,802 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:22:06,393 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:22:06,448 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:22:06,471 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-06 22:22:06,488 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:22:06,683 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:22:06,704 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-06 22:22:06,724 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:22:07,235 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-06 22:22:07,252 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-06 22:22:07,255 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-06 22:22:07,287 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "max_storage_gb" does not exist
LINE 3:                    max_storage_gb, features, compliance_regi...
                           ^

2025-10-06 22:22:07,329 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "max_storage_gb" of relation "tenants" does not exist
LINE 4:              max_storage_gb, features, compliance_regions, d...
                     ^

2025-10-06 22:22:07,330 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "max_storage_gb" of relation "tenants" does not exist
LINE 4:              max_storage_gb, features, compliance_regions, d...
                     ^

2025-10-06 22:22:07,331 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-06 22:22:07,332 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-06 22:22:07,381 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-06 22:22:07,382 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-06 22:22:07,382 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-06 22:22:07,383 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-06 22:22:07,384 - utils.activity_tracker - INFO - Activity tracked: scan_started for user vishaal314
2025-10-06 22:22:12,379 - services.intelligent_website_scanner - INFO - Discovered 111 pages, selected 5 for scanning
2025-10-06 22:22:20,425 - services.intelligent_website_scanner - INFO - Intelligent website scan completed: 19 findings in 12.0s
2025-10-06 22:22:20,425 - services.intelligent_website_scanner - INFO - Scanned 5/5 pages (100.0% coverage)
2025-10-06 22:22:20,428 - services.intelligent_scanner_manager - INFO - Intelligent website scan completed: intelligent_scan_c0f2db17
2025-10-06 22:22:20,429 - utils.activity_tracker - INFO - Activity tracked: scan_completed for user vishaal314
2025-10-06 22:22:20,433 - services.license_manager - INFO - License saved: DGP-ENT-2025-PROD-001
2025-10-06 22:22:20,473 - services.usage_analytics - INFO - Usage event tracked: scan_completed for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:22:20,511 - utils.compliance_calculator - INFO - Compliance score calculated: 0.0% (Critical: 0, High: 15, Medium: 4, Low: 0) for scan web_scan_7fecc570
2025-10-06 22:22:20,514 - utils.compliance_calculator - INFO - Compliance score retrieved from cache: 0.0%
2025-10-06 22:22:20,841 - app - INFO - Performance optimizations initialized successfully
2025-10-06 22:22:20,896 - root - INFO - Added 38 missing translation keys to nl.json
2025-10-06 22:22:20,979 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-06 22:22:20,994 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-06 22:22:20,996 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-06 22:22:21,023 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "max_storage_gb" does not exist
LINE 3:                    max_storage_gb, features, compliance_regi...
                           ^

2025-10-06 22:22:21,054 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "max_storage_gb" of relation "tenants" does not exist
LINE 4:              max_storage_gb, features, compliance_regions, d...
                     ^

2025-10-06 22:22:21,055 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "max_storage_gb" of relation "tenants" does not exist
LINE 4:              max_storage_gb, features, compliance_regions, d...
                     ^

2025-10-06 22:22:21,055 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-06 22:22:21,055 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-06 22:22:21,099 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-06 22:22:21,099 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-06 22:22:21,099 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-06 22:22:21,100 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-06 22:22:21,100 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-06 22:22:21,100 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-06 22:22:21,100 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-06 22:22:21,102 - services.unified_html_report_generator - WARNING - Insufficient historical data for user unknown, using fallback
2025-10-06 22:22:21,153 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-06 22:22:21,169 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-06 22:22:21,171 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-06 22:22:21,211 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "max_storage_gb" does not exist
LINE 3:                    max_storage_gb, features, compliance_regi...
                           ^

2025-10-06 22:22:21,255 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "max_storage_gb" of relation "tenants" does not exist
LINE 4:              max_storage_gb, features, compliance_regions, d...
                     ^

2025-10-06 22:22:21,256 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "max_storage_gb" of relation "tenants" does not exist
LINE 4:              max_storage_gb, features, compliance_regions, d...
                     ^

2025-10-06 22:22:21,264 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-06 22:22:21,265 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-06 22:22:21,316 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-06 22:22:21,317 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-06 22:22:21,317 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-06 22:22:21,318 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-06 22:22:21,319 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-06 22:22:21,319 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-06 22:22:21,320 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-06 22:22:21,322 - services.unified_html_report_generator - WARNING - Insufficient historical data for user unknown, using fallback
2025-10-06 22:22:33,457 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:22:33,492 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:22:33,507 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-06 22:22:33,537 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:23:33,711 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:23:33,750 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:23:33,768 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-06 22:23:33,987 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:23:34,006 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:23:34,021 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-06 22:23:34,039 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:23:37,175 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:23:37,216 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:23:37,237 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-06 22:23:37,462 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:23:37,511 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:23:37,529 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-06 22:23:37,548 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:23:40,779 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:23:40,835 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:23:40,853 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-06 22:23:41,066 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:23:41,092 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:23:41,112 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-06 22:23:41,138 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-06 22:23:45,106 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:29:48,005 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:29:59,173 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:29:59,321 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:30:07,905 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-06 22:30:08,067 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-07 15:53:32.387 MediaFileHandler: Missing file .env
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/streamlit/runtime/memory_media_file_storage.py", line 140, in get_file
    return self._files_by_id[file_id]
           ~~~~~~~~~~~~~~~~~^^^^^^^^^
KeyError: '.env'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/streamlit/web/server/media_file_handler.py", line 95, in validate_absolute_path
    self._storage.get_file(absolute_path)
  File "/usr/local/lib/python3.11/site-packages/streamlit/runtime/memory_media_file_storage.py", line 142, in get_file
    raise MediaFileStorageError(
streamlit.runtime.media_file_storage.MediaFileStorageError: Bad filename '.env'. (No media file with id '.env')
2025-10-10 18:36:16,929 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-10 18:36:35,168 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-10 18:36:35,732 - utils.secure_auth_enhanced - INFO - User vishaal314 authenticated successfully
2025-10-10 18:36:35,841 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-10 18:36:35,856 - utils.session_optimizer - INFO - Created session 50a270a4-6f04-4cd7-b599-c99f781dfb96 for user vishaal314
2025-10-10 18:36:35,870 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-10 18:36:35,879 - services.license_manager - INFO - License saved: DGP-ENT-2025-PROD-001
2025-10-10 18:36:35,888 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-10 18:36:38,612 - services.encryption_service - INFO - Local KMS provider initialized
2025-10-10 18:36:38,617 - services.encryption_service - WARNING - boto3 not available for AWS KMS integration
2025-10-10 18:36:38,628 - services.encryption_service - INFO - Key management initialized
2025-10-10 18:36:38,783 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-10 18:36:38,817 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-10 18:36:38,822 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-10 18:36:38,884 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "data_residency" does not exist
LINE 3: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 18:36:38,932 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 18:36:38,932 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 18:36:38,939 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-10 18:36:38,939 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-10 18:36:38,990 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 18:36:38,991 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 18:36:38,991 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-10 18:36:38,991 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-10 18:36:38,991 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 18:36:38,991 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 18:36:38,992 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 18:36:38,992 - __main__ - INFO - Dashboard: Retrieved 0 total scans for user vishaal314
2025-10-10 18:36:38,992 - __main__ - INFO - Dashboard: No scans found for user vishaal314, getting all recent scans
2025-10-10 18:36:38,992 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 18:36:38,992 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 18:36:38,992 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 18:36:38,993 - __main__ - INFO - Dashboard: Raw aggregator returned 0 scans for user vishaal314
2025-10-10 18:36:38,993 - __main__ - INFO - Dashboard: Processing 0 completed scans from aggregator
2025-10-10 18:36:39,044 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-10 18:36:39,063 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-10 18:36:39,069 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-10 18:36:39,122 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "data_residency" does not exist
LINE 3: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 18:36:39,168 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 18:36:39,169 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 18:36:39,170 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-10 18:36:39,171 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-10 18:36:39,222 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 18:36:39,223 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 18:36:39,223 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-10 18:36:39,224 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-10 18:36:39,225 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 18:36:39,225 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 18:36:39,225 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 18:36:39,228 - __main__ - INFO - Dashboard: Direct database query found 0 total scans for user vishaal314
2025-10-10 18:36:39,228 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 18:36:39,229 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 18:36:39,229 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 18:36:39,231 - __main__ - INFO - Dashboard: No user-specific scans, using 0 total scans from database
2025-10-10 18:36:39,231 - __main__ - INFO - Dashboard: Manual date filtering found 0 scans within 30 days
2025-10-10 18:36:39,232 - __main__ - INFO - Dashboard: Activity tracker found 0 total activities, 0 completed scans
2025-10-10 18:36:39,232 - __main__ - INFO - Dashboard: Found 0 total activities, 0 today in activity tracker
2025-10-10 18:36:39,232 - __main__ - INFO - Dashboard: Combining 0 aggregator scans + 0 today's activities
2025-10-10 18:36:39,233 - __main__ - INFO - Dashboard DISPLAY: Showing metrics - Scans: 0, PII: 0, Compliance: 94.5%, Issues: 0
2025-10-10 18:36:39,296 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-10 18:36:39,317 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-10 18:36:39,319 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-10 18:36:39,361 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "data_residency" does not exist
LINE 3: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 18:36:39,401 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 18:36:39,401 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 18:36:39,409 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-10 18:36:39,409 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-10 18:36:39,454 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 18:36:39,455 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 18:36:39,455 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-10 18:36:39,456 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-10 18:36:39,456 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 18:36:39,457 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 18:36:39,457 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 18:36:39,459 - __main__ - INFO - Dashboard: Fresh aggregator returned 0 scans for recent activity display
2025-10-10 18:36:39,459 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 18:36:39,460 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 18:36:39,460 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 18:36:39,462 - __main__ - INFO - Dashboard: No user-specific scans, using 0 total recent scans from all users2025-10-10 18:36:39,463 - __main__ - INFO - Dashboard: Ensuring all scanner types update dashboard data properly
2025-10-10 18:36:44,528 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-10 18:36:44,572 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-10 18:36:44,594 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-10 18:36:44,609 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-10 18:36:47,018 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-10 18:36:47,082 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-10 18:36:47,111 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-10 18:36:47,158 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-10 19:39:47,853 - utils.session_optimizer - INFO - Removed session 50a270a4-6f04-4cd7-b599-c99f781dfb96
2025-10-10 19:39:47,853 - utils.session_optimizer - INFO - Cleaned up 1 expired sessions
2025-10-10 19:51:46,467 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-10 19:53:38,599 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-10 19:53:39,051 - utils.secure_auth_enhanced - INFO - User vishaal314 authenticated successfully
2025-10-10 19:53:39,240 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-10 19:53:39,260 - utils.session_optimizer - INFO - Created session e0df18bb-4ccb-44d9-9fd0-08c315255333 for user vishaal314
2025-10-10 19:53:39,296 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-10 19:53:39,307 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-10 19:53:39,365 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-10 19:53:39,387 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-10 19:53:39,390 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-10 19:53:39,437 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "data_residency" does not exist
LINE 3: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:39,480 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:39,481 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:39,488 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-10 19:53:39,489 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-10 19:53:39,542 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 19:53:39,543 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 19:53:39,543 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-10 19:53:39,544 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-10 19:53:39,544 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 19:53:39,544 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 19:53:39,545 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 19:53:39,547 - __main__ - INFO - Dashboard: Retrieved 0 total scans for user vishaal314
2025-10-10 19:53:39,547 - __main__ - INFO - Dashboard: No scans found for user vishaal314, getting all recent scans
2025-10-10 19:53:39,548 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 19:53:39,548 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 19:53:39,548 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 19:53:39,550 - __main__ - INFO - Dashboard: Raw aggregator returned 0 scans for user vishaal314
2025-10-10 19:53:39,551 - __main__ - INFO - Dashboard: Processing 0 completed scans from aggregator
2025-10-10 19:53:39,594 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-10 19:53:39,610 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-10 19:53:39,612 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-10 19:53:39,656 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "data_residency" does not exist
LINE 3: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:39,696 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:39,697 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:39,697 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-10 19:53:39,698 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-10 19:53:39,740 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 19:53:39,741 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 19:53:39,741 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-10 19:53:39,741 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-10 19:53:39,741 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 19:53:39,741 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 19:53:39,742 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 19:53:39,743 - __main__ - INFO - Dashboard: Direct database query found 0 total scans for user vishaal314
2025-10-10 19:53:39,743 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 19:53:39,743 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 19:53:39,743 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 19:53:39,744 - __main__ - INFO - Dashboard: No user-specific scans, using 0 total scans from database
2025-10-10 19:53:39,745 - __main__ - INFO - Dashboard: Manual date filtering found 0 scans within 30 days
2025-10-10 19:53:39,745 - __main__ - INFO - Dashboard: Activity tracker found 0 total activities, 0 completed scans
2025-10-10 19:53:39,745 - __main__ - INFO - Dashboard: Found 0 total activities, 0 today in activity tracker
2025-10-10 19:53:39,745 - __main__ - INFO - Dashboard: Combining 0 aggregator scans + 0 today's activities
2025-10-10 19:53:39,746 - __main__ - INFO - Dashboard DISPLAY: Showing metrics - Scans: 0, PII: 0, Compliance: 94.5%, Issues: 0
2025-10-10 19:53:39,786 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-10 19:53:39,806 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-10 19:53:39,809 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-10 19:53:39,839 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "data_residency" does not exist
LINE 3: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:39,867 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:39,867 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:39,872 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-10 19:53:39,873 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-10 19:53:39,924 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 19:53:39,925 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 19:53:39,925 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-10 19:53:39,926 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-10 19:53:39,926 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 19:53:39,926 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 19:53:39,927 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 19:53:39,928 - __main__ - INFO - Dashboard: Fresh aggregator returned 0 scans for recent activity display
2025-10-10 19:53:39,929 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 19:53:39,929 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 19:53:39,929 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 19:53:39,930 - __main__ - INFO - Dashboard: No user-specific scans, using 0 total recent scans from all users2025-10-10 19:53:39,931 - __main__ - INFO - Dashboard: Ensuring all scanner types update dashboard data properly
2025-10-10 19:53:56,440 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-10 19:53:56,481 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-10 19:53:56,489 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-10 19:53:56,614 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-10 19:53:56,633 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-10 19:53:56,645 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-10 19:53:56,693 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-10 19:53:56,719 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-10 19:53:56,733 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-10 19:53:56,777 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "data_residency" does not exist
LINE 3: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:56,831 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:56,831 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:56,832 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-10 19:53:56,832 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-10 19:53:56,871 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 19:53:56,871 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 19:53:56,872 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-10 19:53:56,872 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-10 19:53:56,873 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 19:53:56,873 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 19:53:56,873 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 19:53:56,875 - __main__ - INFO - Dashboard: Retrieved 0 total scans for user vishaal314
2025-10-10 19:53:56,875 - __main__ - INFO - Dashboard: No scans found for user vishaal314, getting all recent scans
2025-10-10 19:53:56,875 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 19:53:56,875 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 19:53:56,876 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 19:53:56,877 - __main__ - INFO - Dashboard: Raw aggregator returned 0 scans for user vishaal314
2025-10-10 19:53:56,877 - __main__ - INFO - Dashboard: Processing 0 completed scans from aggregator
2025-10-10 19:53:56,939 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-10 19:53:56,956 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-10 19:53:56,959 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-10 19:53:57,003 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "data_residency" does not exist
LINE 3: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:57,033 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:57,034 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:57,040 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-10 19:53:57,041 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-10 19:53:57,074 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 19:53:57,079 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 19:53:57,079 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-10 19:53:57,079 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-10 19:53:57,079 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 19:53:57,079 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 19:53:57,079 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 19:53:57,080 - __main__ - INFO - Dashboard: Direct database query found 0 total scans for user vishaal314
2025-10-10 19:53:57,080 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 19:53:57,080 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 19:53:57,080 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 19:53:57,081 - __main__ - INFO - Dashboard: No user-specific scans, using 0 total scans from database
2025-10-10 19:53:57,081 - __main__ - INFO - Dashboard: Manual date filtering found 0 scans within 30 days
2025-10-10 19:53:57,081 - __main__ - INFO - Dashboard: Activity tracker found 0 total activities, 0 completed scans
2025-10-10 19:53:57,081 - __main__ - INFO - Dashboard: Found 0 total activities, 0 today in activity tracker
2025-10-10 19:53:57,081 - __main__ - INFO - Dashboard: Combining 0 aggregator scans + 0 today's activities
2025-10-10 19:53:57,082 - __main__ - INFO - Dashboard DISPLAY: Showing metrics - Scans: 0, PII: 0, Compliance: 94.5%, Issues: 0
2025-10-10 19:53:57,113 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-10 19:53:57,130 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-10 19:53:57,133 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-10 19:53:57,169 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "data_residency" does not exist
LINE 3: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:57,202 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:57,202 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:57,208 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-10 19:53:57,208 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-10 19:53:57,245 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 19:53:57,246 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 19:53:57,247 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-10 19:53:57,247 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-10 19:53:57,248 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 19:53:57,248 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 19:53:57,249 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 19:53:57,251 - __main__ - INFO - Dashboard: Fresh aggregator returned 0 scans for recent activity display
2025-10-10 19:53:57,252 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 19:53:57,253 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 19:53:57,254 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 19:53:57,256 - __main__ - INFO - Dashboard: No user-specific scans, using 0 total recent scans from all users2025-10-10 19:53:57,257 - __main__ - INFO - Dashboard: Ensuring all scanner types update dashboard data properly
2025-10-10 19:53:58,212 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-10 19:53:58,241 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-10 19:53:58,254 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-10 19:53:58,421 - __main__ - INFO - Performance optimizations initialized successfully
2025-10-10 19:53:58,461 - services.usage_analytics - INFO - Usage event tracked: user_login for user vishaal314_ef2cd703a99bf4e4
2025-10-10 19:53:58,474 - services.license_manager - INFO - License loaded: DGP-ENT-2025-PROD-001
2025-10-10 19:53:58,514 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-10 19:53:58,527 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-10 19:53:58,528 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-10 19:53:58,558 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "data_residency" does not exist
LINE 3: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:58,605 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:58,606 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:58,607 - services.multi_tenant_service - INFO - Multi-tenant service initialized with organization isolation
2025-10-10 19:53:58,608 - services.results_aggregator - INFO - Multi-tenant service initialized for secure tenant isolation
2025-10-10 19:53:58,673 - services.results_aggregator - ERROR - Error creating database tables: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 19:53:58,674 - services.results_aggregator - ERROR - Error initializing database: Database initialization required for enterprise security compliance: current transaction is aborted, commands ignored until end of transaction block

2025-10-10 19:53:58,674 - services.results_aggregator - WARNING - Non-strict mode: falling back to file-based storage
2025-10-10 19:53:58,675 - services.results_aggregator - INFO - File-based storage initialized for non-strict mode
2025-10-10 19:53:58,675 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 19:53:58,675 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 19:53:58,675 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 19:53:58,677 - __main__ - INFO - Dashboard: Retrieved 0 total scans for user vishaal314
2025-10-10 19:53:58,677 - __main__ - INFO - Dashboard: No scans found for user vishaal314, getting all recent scans
2025-10-10 19:53:58,678 - services.multi_tenant_service - WARNING - Access denied: Unknown organization default_org
2025-10-10 19:53:58,678 - services.multi_tenant_service - ERROR - Failed to get secure connection for organization default_org: Access denied to organization default_org
2025-10-10 19:53:58,678 - services.results_aggregator - ERROR - Secure database connection error for organization default_org: Secure connection failed: Access denied to organization default_org
2025-10-10 19:53:58,679 - __main__ - INFO - Dashboard: Raw aggregator returned 0 scans for user vishaal314
2025-10-10 19:53:58,680 - __main__ - INFO - Dashboard: Processing 0 completed scans from aggregator
2025-10-10 19:53:58,736 - services.multi_tenant_service - INFO - Initializing Row Level Security for tenant isolation
2025-10-10 19:53:58,762 - services.multi_tenant_service - INFO - Row Level Security policies created successfully
2025-10-10 19:53:58,765 - services.multi_tenant_service - INFO - Multi-tenant database schema initialized successfully with RLS
2025-10-10 19:53:58,801 - services.multi_tenant_service - ERROR - Failed to load tenant configs: column "data_residency" does not exist
LINE 3: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:58,838 - services.multi_tenant_service - ERROR - Failed to create tenant default_org: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...
                                                             ^

2025-10-10 19:53:58,838 - services.multi_tenant_service - ERROR - Failed to create default tenant: Tenant creation failed: column "data_residency" of relation "tenants" does not exist
LINE 4: ...    max_storage_gb, features, compliance_regions, data_resid...